<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShitRust - Text Adventure Game Tutorial</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" href="../../images/icon.svg" type="image/svg+xml">
  
  <!-- Styles -->
  <link rel="stylesheet" href="../../css/style.css">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Prism.js for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <nav>
        <div class="logo-container">
          <img src="../../images/icon.svg" alt="ShitRust Logo" class="logo">
          <span class="logo-text">ShitRust</span>
        </div>
        
        <button class="hamburger">
          <i class="fas fa-bars"></i>
        </button>
        
        <ul class="nav-links">
          <li><a href="../../index.html#features">Features</a></li>
          <li><a href="../../index.html#installation">Installation</a></li>
          <li><a href="../../index.html#examples">Examples</a></li>
          <li><a href="../../index.html#documentation">Documentation</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
  <!-- Tutorial Content -->
  <section class="documentation-content">
    <div class="container">
      <div class="documentation-header">
        <h1>Building a Text Adventure Game</h1>
        <p>Learn how to create an interactive text adventure with object-oriented design in ShitRust.</p>
      </div>

      <div class="doc-nav">
        <ul>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#game-design">Game Design</a></li>
          <li><a href="#items">Items</a></li>
          <li><a href="#rooms">Rooms</a></li>
          <li><a href="#player">Player</a></li>
          <li><a href="#game-engine">Game Engine</a></li>
          <li><a href="#running">Running the Game</a></li>
          <li><a href="#extensions">Extensions</a></li>
        </ul>
      </div>
      
      <div class="doc-content">
        <section id="introduction">
          <h2>Introduction</h2>
          <p>In this tutorial, we'll build a text adventure game called "The Enchanted Forest Adventure". This project will demonstrate several advanced ShitRust features:</p>
          
          <ul>
            <li>Object-oriented programming with structs and methods</li>
            <li>Working with collections (Vector, HashMap)</li>
            <li>Game state management</li>
            <li>User input parsing</li>
            <li>Control flow with pattern matching</li>
            <li>Dynamic game world creation</li>
          </ul>
          
          <p>Our game will feature:</p>
          <ul>
            <li>Multiple rooms to explore</li>
            <li>Items to examine, take, drop, and use</li>
            <li>An inventory system</li>
            <li>Interactive puzzles</li>
            <li>Random encounters</li>
            <li>Health system</li>
          </ul>
          
          <p>By the end of this tutorial, you'll have a complete text adventure game and understand how to expand it with your own ideas.</p>
          
          <div class="note">
            <h4>ðŸ“Œ Note</h4>
            <p>This tutorial assumes you have completed the <a href="../calculator/index.html">Calculator</a> and <a href="../todo/index.html">Todo List</a> tutorials or have equivalent experience with ShitRust.</p>
          </div>
        </section>
        
        <section id="game-design">
          <h2>Game Design</h2>
          <p>Before diving into coding, let's outline the structure of our game:</p>
          
          <h3>Core Components</h3>
          <ul>
            <li><strong>Item</strong>: Objects that can be examined, taken, and used</li>
            <li><strong>Room</strong>: Locations that contain items and connections to other rooms</li>
            <li><strong>Player</strong>: The user's avatar with inventory and health</li>
            <li><strong>Game</strong>: The main engine that manages rooms, the player, and game logic</li>
          </ul>
          
          <h3>Game Map</h3>
          <p>Our adventure will take place in an enchanted forest with the following locations:</p>
          <ul>
            <li><strong>Forest Entrance</strong>: The starting point</li>
            <li><strong>Forest Clearing</strong>: Contains a mysterious pedestal</li>
            <li><strong>Winding Path</strong>: Leads deeper into the forest</li>
            <li><strong>Dark Cave</strong>: A mysterious cave with hidden treasures</li>
            <li><strong>Abandoned Cabin</strong>: Contains useful items and clues</li>
            <li><strong>Hidden Treasure Room</strong>: A secret room that can be unlocked</li>
          </ul>
          
          <p>Let's start implementing these components one by one.</p>
        </section>
        
        <section id="items">
          <h2>Items Implementation</h2>
          <p>First, let's set up our imports and define the <code>Item</code> struct:</p>
          
          <pre><code class="language-rust">// Import required modules
import { stdin, stdout } from "std/io";
import { Vector, HashMap } from "std/collections";
import { Random } from "std/math";

// Define Item struct
struct Item {
    name: string,
    description: string,
    can_be_taken: bool,
    
    // Constructor for creating a new item
    static fn new(name: string, description: string, can_be_taken: bool) -> Item {
        return Item {
            name: name,
            description: description,
            can_be_taken: can_be_taken
        };
    }
    
    // Display the item description
    fn examine() -> void {
        println(self.description);
    }
}</code></pre>
          
          <p>The <code>Item</code> struct has three fields:</p>
          <ul>
            <li><code>name</code>: The name of the item (e.g., "key", "book")</li>
            <li><code>description</code>: A detailed description of the item</li>
            <li><code>can_be_taken</code>: A boolean indicating if the player can pick up the item</li>
          </ul>
          
          <p>We've also defined two methods:</p>
          <ul>
            <li><code>new</code>: A static method (constructor) to create a new item</li>
            <li><code>examine</code>: A method to display the item's description</li>
          </ul>
        </section>
        
        <section id="rooms">
          <h2>Rooms Implementation</h2>
          <p>Next, let's define the <code>Room</code> struct:</p>
          
          <pre><code class="language-rust">// Define Room struct
struct Room {
    id: string,
    name: string,
    description: string,
    exits: HashMap<string, string>,  // direction -> room_id
    items: Vector<Item>,
    
    // Constructor for creating a new room
    static fn new(id: string, name: string, description: string) -> Room {
        return Room {
            id: id,
            name: name,
            description: description,
            exits: HashMap<string, string>::new(),
            items: Vector<Item>::new()
        };
    }
    
    // Add an exit to the room
    fn add_exit(direction: string, room_id: string) -> void {
        self.exits.insert(direction, room_id);
    }
    
    // Add an item to the room
    fn add_item(item: Item) -> void {
        self.items.push(item);
    }
    
    // Remove an item from the room
    fn remove_item(item_name: string) -> result<Item, string> {
        for i in 0..self.items.length() {
            if self.items[i].name.to_lowercase() == item_name.to_lowercase() {
                let item = self.items[i];
                if !item.can_be_taken {
                    return err("You can't take the " + item_name + ".");
                }
                self.items.remove(i);
                return ok(item);
            }
        }
        return err("There is no " + item_name + " here.");
    }
    
    // Check if a room has an exit in a given direction
    fn has_exit(direction: string) -> bool {
        return self.exits.contains_key(direction);
    }
    
    // Get the ID of the room in a given direction
    fn get_exit(direction: string) -> string {
        return self.exits[direction];
    }
    
    // Display the room description and available exits
    fn describe() -> void {
        println(self.name);
        println(self.description);
        
        // List items in the room
        if self.items.length() > 0 {
            println("\nYou can see:");
            for item in self.items {
                println("- " + item.name);
            }
        }
        
        // List available exits
        println("\nExits:");
        let directions = self.exits.keys();
        for direction in directions {
            println("- " + direction);
        }
    }
}</code></pre>
          
          <p>The <code>Room</code> struct has five fields:</p>
          <ul>
            <li><code>id</code>: A unique identifier for the room (e.g., "cave", "entrance")</li>
            <li><code>name</code>: The display name of the room</li>
            <li><code>description</code>: A detailed description of the room</li>
            <li><code>exits</code>: A HashMap mapping directions to room IDs</li>
            <li><code>items</code>: A Vector of items in the room</li>
          </ul>
          
          <p>The <code>Room</code> struct has several methods for managing exits, items, and displaying information.</p>
        </section>
        
        <section id="player">
          <h2>Player Implementation</h2>
          <p>Now, let's define the <code>Player</code> struct:</p>
          
          <pre><code class="language-rust">// Define Player struct
struct Player {
    current_room_id: string,
    inventory: Vector<Item>,
    health: int,
    
    // Constructor for creating a new player
    static fn new(starting_room_id: string) -> Player {
        return Player {
            current_room_id: starting_room_id,
            inventory: Vector<Item>::new(),
            health: 100
        };
    }
    
    // Add an item to the player's inventory
    fn add_item(item: Item) -> void {
        self.inventory.push(item);
    }
    
    // Remove an item from the player's inventory
    fn remove_item(item_name: string) -> result<Item, string> {
        for i in 0..self.inventory.length() {
            if self.inventory[i].name.to_lowercase() == item_name.to_lowercase() {
                let item = self.inventory[i];
                self.inventory.remove(i);
                return ok(item);
            }
        }
        return err("You don't have a " + item_name + ".");
    }
    
    // Check if the player has a specific item
    fn has_item(item_name: string) -> bool {
        for item in self.inventory {
            if item.name.to_lowercase() == item_name.to_lowercase() {
                return true;
            }
        }
        return false;
    }
    
    // Display the player's inventory
    fn show_inventory() -> void {
        if self.inventory.length() == 0 {
            println("Your inventory is empty.");
            return;
        }
        
        println("Inventory:");
        for item in self.inventory {
            println("- " + item.name);
        }
    }
}</code></pre>
          
          <p>The <code>Player</code> struct has three fields:</p>
          <ul>
            <li><code>current_room_id</code>: The ID of the room the player is currently in</li>
            <li><code>inventory</code>: A Vector of items the player is carrying</li>
            <li><code>health</code>: The player's health points</li>
          </ul>
          
          <p>The <code>Player</code> struct has methods for managing inventory and checking player status.</p>
        </section>
        
        <section id="game-engine">
          <h2>Game Engine Implementation</h2>
          <p>Finally, let's implement the <code>Game</code> struct, which ties everything together:</p>
          
          <pre><code class="language-rust">// Define Game struct
struct Game {
    rooms: HashMap<string, Room>,
    player: Player,
    running: bool,
    random: Random,
    
    // Constructor for creating a new game
    static fn new() -> Game {
        let game = Game {
            rooms: HashMap<string, Room>::new(),
            player: Player::new("entrance"),  // Start in the entrance
            running: true,
            random: Random::new()
        };
        
        // Initialize the game world
        game.setup_world();
        
        return game;
    }
    
    // Setup the game world with rooms and items
    fn setup_world() -> void {
        // Create rooms
        let entrance = Room::new("entrance", "Forest Entrance", 
            "You stand at the entrance to a dark, mysterious forest. " +
            "The trees loom overhead, their branches swaying in the gentle breeze.");
        entrance.add_exit("north", "clearing");
        entrance.add_exit("east", "path");
        entrance.add_item(Item::new("sign", "A wooden sign that reads: 'Beware of the forest creatures!'", false));
        
        let clearing = Room::new("clearing", "Forest Clearing", 
            "A small clearing in the forest. Sunlight filters through the canopy above. " +
            "There's a strange stone pedestal in the center.");
        clearing.add_exit("south", "entrance");
        clearing.add_exit("west", "cave");
        clearing.add_item(Item::new("flowers", "Beautiful wildflowers growing in patches.", true));
        clearing.add_item(Item::new("pedestal", "A stone pedestal with a slot that seems to fit something shiny.", false));
        
        // Add more rooms here...
        
        // Add rooms to the game
        self.rooms.insert("entrance", entrance);
        self.rooms.insert("clearing", clearing);
        // Add more room insertions here...
    }</code></pre>
          
          <p>The <code>Game</code> struct contains:</p>
          <ul>
            <li>A HashMap of all rooms in the game</li>
            <li>The player object</li>
            <li>A flag indicating if the game is running</li>
            <li>A random number generator for game events</li>
          </ul>
          
          <p>The <code>setup_world</code> method creates all the rooms, adds exits and items, and builds the game world.</p>
          
          <p>Next, we need to implement methods for handling player commands:</p>
          
          <pre><code class="language-rust">// Get the current room
fn current_room() -> Room {
    return self.rooms[self.player.current_room_id];
}

// Process a player command
fn process_command(command: string) -> void {
    let parts = command.to_lowercase().trim().split(" ");
    let action = parts[0];
    
    match action {
        "go" | "move" | "walk" => {
            if parts.length() < 2 {
                println("Go where?");
                return;
            }
            
            let direction = parts[1];
            self.move_player(direction);
        },
        "look" => {
            self.current_room().describe();
        },
        "examine" | "inspect" => {
            if parts.length() < 2 {
                println("Examine what?");
                return;
            }
            
            let item_name = parts[1];
            self.examine_item(item_name);
        },
        // More commands here...
        "help" => {
            self.show_help();
        },
        "quit" | "exit" => {
            println("Are you sure you want to quit? (y/n)");
            let answer = stdin.read_line().trim().to_lowercase();
            if answer == "y" || answer == "yes" {
                self.running = false;
            }
        },
        _ => {
            println("I don't understand that command. Type 'help' for a list of commands.");
        }
    }
}</code></pre>
          
          <p>The <code>process_command</code> method parses player input and calls the appropriate game methods based on the command.</p>
          
          <p>Finally, we need a method to start the game:</p>
          
          <pre><code class="language-rust">// Start the game
fn start() -> void {
    println("=== The Enchanted Forest Adventure ===");
    println("Type 'help' for a list of commands.\n");
    
    // Show the initial room description
    self.current_room().describe();
    
    // Main game loop
    while self.running {
        print("\n> ");
        let command = stdin.read_line();
        self.process_command(command);
    }
    
    println("Thanks for playing!");
}</code></pre>
          
          <p>The <code>start</code> method displays the initial game information, shows the starting room description, and then enters the main game loop.</p>
        </section>
        
        <section id="running">
          <h2>Running the Game</h2>
          <p>To run the game, we need a simple <code>main</code> function:</p>
          
          <pre><code class="language-rust">// Main function
fn main() -> void {
    let game = Game::new();
    game.start();
}</code></pre>
          
          <p>To play the game:</p>
          
          <ol>
            <li>Save the code in a file named <code>adventure_game.sr</code></li>
            <li>Open a terminal and navigate to the directory containing your file</li>
            <li>Compile and run the program with the following command:</li>
          </ol>
          
          <pre><code class="language-bash">shitrust run adventure_game.sr</code></pre>
          
          <h3>Game Commands</h3>
          <p>Here are the commands you can use in the game:</p>
          <ul>
            <li><code>go [direction]</code> - Move in a direction (north, south, east, west)</li>
            <li><code>look</code> - Look around the current location</li>
            <li><code>examine [item]</code> - Examine an item more closely</li>
            <li><code>take [item]</code> - Take an item from the room</li>
            <li><code>drop [item]</code> - Drop an item from your inventory</li>
            <li><code>inventory</code> (or <code>inv</code>, <code>i</code>) - Show your inventory</li>
            <li><code>use [item]</code> - Use an item in your inventory</li>
            <li><code>help</code> - Show this help message</li>
            <li><code>quit</code> - Quit the game</li>
          </ul>
        </section>
        
        <section id="extensions">
          <h2>Extensions and Challenges</h2>
          <p>Now that you've built a basic text adventure, here are some ideas to extend and improve it:</p>
          
          <ol>
            <li>Add more rooms to expand the world</li>
            <li>Implement NPCs (non-player characters) to talk to</li>
            <li>Add a combat system for encounters with enemies</li>
            <li>Implement a quest system with objectives</li>
            <li>Add time-based events or a day/night cycle</li>
            <li>Create a save/load system to persist game state</li>
            <li>Add a magic system with spells and effects</li>
          </ol>
          
          <p>These extensions will give you more practice with ShitRust and help you build a more complex and engaging adventure game.</p>
        </section>
        
        <section>
          <h2>Conclusion</h2>
          <p>Congratulations on completing this tutorial! You've built a text adventure game that demonstrates object-oriented programming, state management, and interactive gameplay.</p>
          
          <p>The complete code for the Text Adventure Game is available in the <a href="adventure_game.sr">adventure_game.sr</a> file.</p>
          
          <p>Check out our other tutorials to continue your ShitRust journey:</p>
          
          <ul>
            <li><a href="../calculator/index.html">Building a Command-Line Calculator</a></li>
            <li><a href="../todo/index.html">Creating a Todo List Manager</a></li>
          </ul>
          
          <p>Or explore the <a href="../../reference.html">Language Reference</a> to learn more about ShitRust's features.</p>
        </section>
      </div>
    </div>
  </section>
  
  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>ShitRust</h3>
          <p>A programming language combining features from Rust, Python, and C/C++.</p>
          <p>Released under the <a href="#">MIT License</a>.</p>
        </div>
        
        <div class="footer-column">
          <h3>Resources</h3>
          <ul class="footer-links">
            <li><a href="../../index.html#features">Features</a></li>
            <li><a href="../../index.html#installation">Installation</a></li>
            <li><a href="../../index.html#examples">Examples</a></li>
            <li><a href="../../index.html#documentation">Documentation</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Documentation</h3>
          <ul class="footer-links">
            <li><a href="../../guide.html">Guide</a></li>
            <li><a href="../../reference.html">Reference</a></li>
            <li><a href="../../api.html">API</a></li>
            <li><a href="../../tutorials.html">Tutorials</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Developer</h3>
          <ul class="footer-links">
            <li><a href="https://github.com/._w0wzers">._w0wzers</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2023 ShitRust Language. Developed by ._w0wzers. All Rights Reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-rust.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-batch.min.js"></script>
  <script src="../../js/main.js"></script>
</body>
</html> 